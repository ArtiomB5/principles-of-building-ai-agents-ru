# 6  
## ВЫЗОВ ИНСТРУМЕНТОВ

Инструменты — это функции, которые агенты могут вызывать для выполнения конкретных задач — будь то получение данных о погоде, запрос к базе данных или выполнение вычислений.

Ключ к эффективному использованию инструментов — четкое взаимодействие с моделью о том, что делает каждый инструмент и когда его использовать.

Вот пример создания и использования инструмента:

```javascript
import { createTool } from "@mastra/core/tools";
import { z } from "zod";

const getWeatherInfo = async (city: string) => {
    // Replace with an actual API call to a weather service
    console.log(`Fetching weather for \${city}...`);
    // Example data structure
    return { temperature: 20, conditions: "Sunny" };
};

export const weatherTool = createTool({
    id: "Get Weather Information",
    description: `Fetches the current weather information for a given city`,
    inputSchema: z.object({
        city: z.string().describe("City name"),
    }),
    outputSchema: z.object({
        temperature: z.number(),
        conditions: z.string(),
    }),
    execute: async ({ context: { city } }) => {
        console.log("Using tool to fetch weather information for", city);
        return await getWeatherInfo(city);
    },
});
```

### **ЛУЧШИЕ ПРАКТИКИ:**

- Предоставляйте подробные описания в определении инструмента и системном промпте  
- Используйте конкретные схемы ввода/вывода  
- Используйте семантические имена, соответствующие функции инструмента (например, `multiplyNumbers` вместо `doStuff`)  

Помните: чем четче вы сообщаете модели цель и использование инструмента, тем больше вероятность, что она использует его правильно. Вы должны описать как то, что он делает, так и когда его вызывать.

### **Проектирование ваших инструментов: самый важный шаг**

КОГДА ВЫ СОЗДАЕТЕ ИИ приложение, самое важное, что вы должны сделать, — это тщательно продумать дизайн ваших инструментов.

- Каков список всех инструментов, которые вам понадобятся?  
- Что будет делать каждый из них?  

Четко распишите это, прежде чем начать программировать.

### **Пример из реальной жизни: агент рекомендаций книг Аланы**

Алана Гойал, инвестор Mastra, хотела построить агента, который мог бы давать интеллектуальные рекомендации и анализ по корпусу рекомендаций книг от инвесторов.

**ПЕРВАЯ ПОПЫТКА:**  
Она попыталась загрузить все книги в окно знаний агента. Это сработало плохо — агент не мог анализировать данные структурированным образом.

**ЛУЧШИЙ ПОДХОД:**  
Она разбила проблему на набор конкретных инструментов, каждый из которых обрабатывал свой аспект данных:

- Инструмент для доступа к корпусу инвесторов  
- Инструмент для рекомендаций книг  
- Инструмент для книг, помеченных по жанру  

Затем она добавила больше инструментов для общих операций:

- Получить все книги по жанру  
- Получить рекомендации книг по инвестору  
- Сортировать людей, пишущих рекомендации, по типу (основатели, инвесторы и т.д.)  

Если бы человеческий аналитик выполнял этот проект, он бы следовал определенному набору операций или запросов.  
Трюк заключается в том, чтобы взять эти операции и записать их как инструменты или запросы, которые ваш агент может использовать.

**РЕЗУЛЬТАТ:**  
С этими инструментами агент теперь мог интеллектуально анализировать корпус книг, отвечать на вопросы c нюансами и предоставлять полезные рекомендации — совсем как опытный человеческий аналитик.

• • •

### **ВЫВОД:**

Думайте как аналитик. Разбейте вашу проблему на четкие, повторно используемые операции. Запишите каждую как инструмент.  
Если вы это сделаете, ваш агент будет гораздо более трудоспособный, надежным и полезным.