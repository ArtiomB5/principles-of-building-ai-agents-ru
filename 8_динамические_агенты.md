# 8  
## ДИНАМИЧЕСКИЕ АГЕНТЫ

Самый простой способ настроить агента — передать строку для его системного промпта, строку для имени провайдера и модели объект/словарь для списка инструментов, которые ему предоставлены.

Но это создает проблему. Что, если вы хотите изменить эти вещи во время выполнения?

### **Что такое динамические агенты?**

Выбор между динамическими и статическими агентами — это, в конечном счете, компромисс между предсказуемостью и мощностью.

Динамический агент — это агент, свойства которого — такие как инструкции, модель и доступные инструменты — могут определяться во время выполнения, а не только при создании агента.

Это означает, что ваш агент может менять свое поведение на основе пользовательского ввода, окружения или любого другого контекста выполнения, который вы предоставите.

### **Пример: Создание динамического агента**

Вот пример динамического агента поддержки, который настраивает свое поведение на основе уровня подписки пользователя и языковых предпочтений:

```javascript
const supportAgent = new Agent({
    name: "Dynamic Support Agent",
    instructions: async ({ runtimeContext }) => {
        const userTier = runtimeContext.get("user-tier");
        const language = runtimeContext.get("language");

        return `You are a customer support agent for our SaaS platform. The current user is on the \${userTier} tier and prefers \${language} language.

For \${userTier} tier users:
\${userTier === "free" ? "- Provide basic support and documentation links" : ""}
\${userTier === "pro" ? "- Offer detailed technical support and best practices" : ""}
\${userTier === "enterprise" ? "- Provide priority support with custom solutions" : ""}

Always respond in \${language} language.`;
    },
    model: ({ runtimeContext }) => {
        const userTier = runtimeContext.get("user-tier");
        return userTier === "enterprise"
            ? openai("gpt-4")
            : openai("gpt-3.5-turbo");
    },
    tools: ({ runtimeContext }) => {
        const userTier = runtimeContext.get("user-tier");
        const baseTools = [knowledgeBase, ticketSystem];

        if (userTier === "pro" || userTier === "enterprise") {
            baseTools.push(advancedAnalytics);
        }

        if (userTier === "enterprise") {
            baseTools.push(customIntegration);
        }
        return baseTools;
    },
});
```