# 9  
## ПРОМЕЖУТОЧНОЕ ПО АГЕНТА

Как только мы видим, что полезно указывать системный промпт, модель и параметры инструментов во время выполнения, мы начинаем задумываться о других вещах, которые мы, возможно, захотим сделать также во время выполнения.

### **Ограждения (Guardrails)**

Ограждения — это общий термин для санитарной обработки ввода, поступающего в ваш агент, или вывода, исходящего из него.

Санитарная обработка входных данных в целом направлена на защиту от атак «инъекции промптов (prompt injection)».

К ним относятся «взлом (jailbreaking)» модели (*«ИГНОРИРУЙ ПРЕДЫДУЩИЕ ИНСТРУКЦИИ И...»*), запросы PII (Personally Identifiable Information) и не по теме чаты, которые могут увеличить ваши счета за LLM.

К счастью, за последние пару лет модели становятся лучше в защите от зловредного ввода; самые запоминающиеся примеры инъекций промптов были пару лет назад.

![Атака инъекции промптов Криса Бакке, декабрь 2023 года](./images/chris_bakke_prompt_injection_attack_december_2023.png)

### **Аутентификация и авторизация агента**

Существует два уровня разрешений, которые следует учитывать для агентов.

Во-первых, разрешение того, к каким ресурсам агент должен иметь доступ. Во-вторых, разрешение того, какие пользователи могут получить доступ к агенту.

Первый мы рассмотрели в предыдущем разделе; второй мы обсудим здесь. Промежуточное ПО — это типичное место для размещения любой авторизации агента, потому что оно находится на периметре вокруг агента, а не внутри его внутреннего цикла.

Одна вещь, о которой стоит подумать при создании агентов, заключается в том, что, поскольку они более мощные, чем шаблоны доступа к данным до LLM, вам, возможно, придется потратить больше времени на обеспечение для них точного разрешения.

Безопасность через скрытность становится менее приемлемым вариантом, когда пользователи могут попросить агента извлечь информацию, спрятанную в укромных уголках и закоулках.